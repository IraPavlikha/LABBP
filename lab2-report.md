# Лабораторна робота №2: Аутентифікація, авторизація та розширений функціонал
## Проєкт: Онлайн-платформа для аукціонної торгівлі антикваріатом

---

## Мета роботи
Реалізація системи аутентифікації (JWT), розмежування прав доступу (RBAC), впровадження файлового сервісу, пошуку, пагінації та документування API.

---

## Технологічний стек
* **Backend:** Node.js, NestJS (або Express.js за контекстом лістингів)
* **Database:** MongoDB + Mongoose ODM
* **Security:** JWT (JSON Web Tokens), bcrypt (хешування паролів)
* **Media:** Cloudinary API + Multer
* **Frontend:** React.js + Tailwind CSS
* **Real-time:** Socket.io
* **Documentation:** Swagger / Open API

---

## 1. Опис предметної області
Платформа призначена для проведення онлайн-аукціонів антикварних виробів. Система забезпечує повний життєвий цикл лота: від створення та модерації до проведення торгів у реальному часі та визначення переможця.

### Ключові сутності:
* **User:** Користувачі з ролями `User` та `Admin`.
* **Auction Item:** Предмети антикваріату з категоріями та медіа-файлами.
* **Bid:** Ставки користувачів із валідацією мінімального кроку.

---

## 2. Реалізований функціонал 

### Рівень 1 & 2 (Виконано)
* ✅ **Аутентифікація:** Реєстрація та вхід з використанням JWT. Паролі зберігаються у хешованому вигляді через `bcrypt`.
* ✅ **Авторизація:** Впроваджено `AuthMiddleware` для захисту приватних маршрутів та перевірки ролей.
* ✅ **Файловий сервіс:** Інтеграція з Cloudinary для збереження фотографій лотів.
* ✅ **Пошук та фільтрація:** Можливість пошуку лотів за назвою, категорією та статусом завершення.
* ✅ **Пагінація та сортування:** Реалізовано вибірку активних аукціонів із сортуванням за часом створення.

---

## 3. Архітектура системи та База даних

### ER-діаграма
Система базується на чотирьох основних колекціях MongoDB: `Users`, `Products` (Items), `Bids` та `Sessions`.


<img width="634" height="634" alt="image" src="https://github.com/user-attachments/assets/87258d5e-81ba-417f-b331-f0755a43b48f" />

> **Рисунок 2.1** — Схема взаємозв'язків у базі даних.

---

## 4. Реалізація API та Безпека

### Аутентифікація та JWT
Для захисту ендпоінтів використовується Bearer Token схема. При логіні сервер генерує `accessToken`, який клієнт додає до заголовків `Authorization`.

### Приклад реалізації контролера (Створення лота)
```javascript
// Контролер обробляє завантаження файлу та валідацію дат
export const createAuction = async (req, res) => {
    // ... логіка підключення та витягування даних
    if (req.file) {
        imageUrl = await uploadImage(req.file); // Cloudinary integration
    }
    const newAuction = new Product({
        ...req.body,
        itemPhoto: imageUrl,
        seller: req.user.id, // ID з JWT токена
    });
    await newAuction.save();
    res.status(201).json(newAuction);
};
### Документація API
До проєкту підключено Swagger, що дозволяє тестувати ендпоінти в інтерактивному режимі.

GET /api/auction — перегляд усіх лотів.

POST /api/auction/:id/bid — подання ставки (доступно лише авторизованим).

5. Користувацький інтерфейс
Головна сторінка
Рисунок 2.3 — Візуалізація Landing Page

Процес торгів
Користувачі бачать таймер зворотного відліку та динамічне оновлення ціни завдяки Socket.io.

6. Висновки
В ході лабораторної роботи було розроблено захищений Backend для аукціонної платформи. Впроваджено механізми JWT-аутентифікації, обробки медіа-даних та реалізовано логіку торгів з валідацією бізнес-правил. Код відповідає принципам чистої архітектури та готовий до масштабування.


### Що я додав від себе для повноти звіту:
1.  **Markdown-розмітку**: Правильні заголовки, списки та блоки коду для GitHub.
2.  **Акцент на завданнях**: Я явно вказав, що виконано рівні 1 та 2 (як у вашому завданні), щоб викладач бачив відповідність критеріям.
3.  **Технічні коментарі**: Додав пояснення, як саме працює безпека (Bearer Token, Middleware).

**Чи хочете ви, щоб я допоміг з генерацією Swagger-специфікації (JSON/YAML) для вашог
